<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>自动化 on SakuraSen&#39;s BLOG</title>
        <link>http://localhost:1313/en/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/</link>
        <description>Recent content in 自动化 on SakuraSen&#39;s BLOG</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en</language>
        <copyright>SakuraSen</copyright>
        <lastBuildDate>Tue, 06 May 2025 13:40:28 +0800</lastBuildDate><atom:link href="http://localhost:1313/en/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>用上预制证书！不再每次手动申请！</title>
        <link>http://localhost:1313/en/p/2025050101/</link>
        <pubDate>Thu, 01 May 2025 00:00:00 +0000</pubDate>
        
        <guid>http://localhost:1313/en/p/2025050101/</guid>
        <description>&lt;img src="http://localhost:1313/p/2025050101/bg.png" alt="Featured image of post 用上预制证书！不再每次手动申请！" /&gt;&lt;h2 id=&#34;ssl证书怎么那么坏&#34;&gt;SSL证书怎么那么坏
&lt;/h2&gt;&lt;p&gt;很久以前，我记得SSL证书只需要一年一申请，不知何时，改成了三个月。&lt;/p&gt;
&lt;p&gt;如果你是付费用户当我没说。&lt;/p&gt;
&lt;h2 id=&#34;全自动化申请ssl证书&#34;&gt;全自动化申请SSL证书
&lt;/h2&gt;&lt;p&gt;得益于&lt;strong&gt;Certd&lt;/strong&gt;我们可以使用流水线自动化部署SSL证书&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://github.com/certd/certd&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34; &gt;Github&lt;/a&gt;

&lt;span style=&#34;white-space: nowrap;&#34;&gt;&lt;svg width=&#34;.7em&#34; height=&#34;.7em&#34; viewBox=&#34;0 0 21 21&#34;
        xmlns=&#34;http://www.w3.org/2000/svg&#34;&gt;
        &lt;path d=&#34;m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z&#34; fill=&#34;currentColor&#34; /&gt;
        &lt;path d=&#34;M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z&#34;
            fill=&#34;currentColor&#34;&gt;
    &lt;/svg&gt;&lt;/span&gt;
 | &lt;a class=&#34;link&#34; href=&#34;https://certd.docmirror.cn/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34; &gt;官网&lt;/a&gt;

&lt;span style=&#34;white-space: nowrap;&#34;&gt;&lt;svg width=&#34;.7em&#34; height=&#34;.7em&#34; viewBox=&#34;0 0 21 21&#34;
        xmlns=&#34;http://www.w3.org/2000/svg&#34;&gt;
        &lt;path d=&#34;m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z&#34; fill=&#34;currentColor&#34; /&gt;
        &lt;path d=&#34;M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z&#34;
            fill=&#34;currentColor&#34;&gt;
    &lt;/svg&gt;&lt;/span&gt;
&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746084079894-1.png&#34;
	width=&#34;1362&#34;
	height=&#34;497&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746084079894-1_hu_cc0f9882612d4214.png 480w, http://localhost:1313/p/2025050101/QQ_1746084079894-1_hu_48325a3b7ced8919.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;截图&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;274&#34;
		data-flex-basis=&#34;657px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;开始部署&#34;&gt;开始部署
&lt;/h2&gt;&lt;p&gt;CertD提供了非常多的部署方式，几乎没有学习成本
&lt;a class=&#34;link&#34; href=&#34;https://certd.docmirror.cn/guide/start.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34; &gt;文档地址&lt;/a&gt;

&lt;span style=&#34;white-space: nowrap;&#34;&gt;&lt;svg width=&#34;.7em&#34; height=&#34;.7em&#34; viewBox=&#34;0 0 21 21&#34;
        xmlns=&#34;http://www.w3.org/2000/svg&#34;&gt;
        &lt;path d=&#34;m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z&#34; fill=&#34;currentColor&#34; /&gt;
        &lt;path d=&#34;M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z&#34;
            fill=&#34;currentColor&#34;&gt;
    &lt;/svg&gt;&lt;/span&gt;
&lt;/p&gt;
&lt;p&gt;这里，我使用的是Docker部署，下方引用官网例子：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;#随便创建一个目录
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;mkdir certd
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;#进入目录
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd certd
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;#下载docker-compose.yaml文件，或者手动下载放到certd目录下
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget https://gitee.com/certd/certd/raw/v2/docker/run/docker-compose.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;#可以根据需要修改里面的配置
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;#1.修改镜像版本号【可选】
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;#2.配置数据保存路径【可选】
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;#3.修改端口号【可选】
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;vi docker-compose.yaml #【可选】
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;#启动certd
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker compose up -d
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;如果提示 没有docker compose命令,请安装docker-compose
&lt;a class=&#34;link&#34; href=&#34;https://docs.docker.com/compose/install/linux/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34; &gt;https://docs.docker.com/compose/install/linux/&lt;/a&gt;

&lt;span style=&#34;white-space: nowrap;&#34;&gt;&lt;svg width=&#34;.7em&#34; height=&#34;.7em&#34; viewBox=&#34;0 0 21 21&#34;
        xmlns=&#34;http://www.w3.org/2000/svg&#34;&gt;
        &lt;path d=&#34;m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z&#34; fill=&#34;currentColor&#34; /&gt;
        &lt;path d=&#34;M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z&#34;
            fill=&#34;currentColor&#34;&gt;
    &lt;/svg&gt;&lt;/span&gt;
&lt;/p&gt;
&lt;p&gt;部署完后，请访问7001与7002端口查看可用性。&lt;/p&gt;
&lt;p&gt;默认账号密码：&lt;strong&gt;admin/123456&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;邮件通知&#34;&gt;邮件通知
&lt;/h2&gt;&lt;p&gt;进入管理后台，你可以先配置邮件通知。
&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746084430783.png&#34;
	width=&#34;849&#34;
	height=&#34;244&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746084430783_hu_7e29cc22c4623ca7.png 480w, http://localhost:1313/p/2025050101/QQ_1746084430783_hu_beef7aabda5b8754.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;EmailSetting&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;347&#34;
		data-flex-basis=&#34;835px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;若不想配置，则直接可以开始创建证书流水线&lt;/p&gt;
&lt;h2 id=&#34;证书流水线&#34;&gt;证书流水线
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746084517963.png&#34;
	width=&#34;748&#34;
	height=&#34;318&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746084517963_hu_bec89d135eca929b.png 480w, http://localhost:1313/p/2025050101/QQ_1746084517963_hu_b3f70077710b548d.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;证书流水线&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;235&#34;
		data-flex-basis=&#34;564px&#34;
	
&gt;
点击新建一个证书流水线&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746084554706.png&#34;
	width=&#34;1328&#34;
	height=&#34;944&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746084554706_hu_e017f8f05bf9e2c4.png 480w, http://localhost:1313/p/2025050101/QQ_1746084554706_hu_e01289944b01a15c.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;setting&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;140&#34;
		data-flex-basis=&#34;337px&#34;
	
&gt;
按照提示选填&lt;/p&gt;
&lt;p&gt;证书签发机构推荐使用Google，若使用Let&amp;rsquo;s Encrypt则可能造成不信任的证书&lt;a class=&#34;link&#34; href=&#34;https://myssl.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34; &gt;查询地址&lt;/a&gt;

&lt;span style=&#34;white-space: nowrap;&#34;&gt;&lt;svg width=&#34;.7em&#34; height=&#34;.7em&#34; viewBox=&#34;0 0 21 21&#34;
        xmlns=&#34;http://www.w3.org/2000/svg&#34;&gt;
        &lt;path d=&#34;m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z&#34; fill=&#34;currentColor&#34; /&gt;
        &lt;path d=&#34;M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z&#34;
            fill=&#34;currentColor&#34;&gt;
    &lt;/svg&gt;&lt;/span&gt;
。&lt;/p&gt;
&lt;p&gt;只是第一次使用需要前往Google获取EAB授权。
&lt;a class=&#34;link&#34; href=&#34;https://certd.docmirror.cn/guide/use/google/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34; &gt;获取教程&lt;/a&gt;

&lt;span style=&#34;white-space: nowrap;&#34;&gt;&lt;svg width=&#34;.7em&#34; height=&#34;.7em&#34; viewBox=&#34;0 0 21 21&#34;
        xmlns=&#34;http://www.w3.org/2000/svg&#34;&gt;
        &lt;path d=&#34;m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z&#34; fill=&#34;currentColor&#34; /&gt;
        &lt;path d=&#34;M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z&#34;
            fill=&#34;currentColor&#34;&gt;
    &lt;/svg&gt;&lt;/span&gt;

获取后无需服务器在海外也可申请Google证书&lt;/p&gt;
&lt;p&gt;当你一切完毕后，你将会看到以下界面
&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746085335997.png&#34;
	width=&#34;1109&#34;
	height=&#34;475&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746085335997_hu_dc34235bc7e52405.png 480w, http://localhost:1313/p/2025050101/QQ_1746085335997_hu_df4115fa22d6ec18.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;界面&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;233&#34;
		data-flex-basis=&#34;560px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;若一切正常，你可以先点击手动触发测试
&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746085604442.png&#34;
	width=&#34;1057&#34;
	height=&#34;281&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746085604442_hu_59c89f77f0b1d767.png 480w, http://localhost:1313/p/2025050101/QQ_1746085604442_hu_ff0e4a561a0288bd.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;alt text&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;376&#34;
		data-flex-basis=&#34;902px&#34;
	
&gt;
一切正常，申请成功，那很棒了！&lt;/p&gt;
&lt;p&gt;你可以返回上一级查看证书
&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746085713241.png&#34;
	width=&#34;2332&#34;
	height=&#34;536&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746085713241_hu_ae6349cb7dadb0c1.png 480w, http://localhost:1313/p/2025050101/QQ_1746085713241_hu_fdab10f0af7b67af.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;alt text&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;435&#34;
		data-flex-basis=&#34;1044px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;自动化部署&#34;&gt;自动化部署
&lt;/h2&gt;&lt;h3 id=&#34;雨云虚拟主机&#34;&gt;雨云虚拟主机
&lt;/h3&gt;&lt;p&gt;若你和我一样，使用雨云虚拟主机（现已停售）。则需要先去&lt;a class=&#34;link&#34; href=&#34;https://app.rainyun.com/apps/ssl/list/free-ssl&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34; &gt;SSL证书中心&lt;/a&gt;

&lt;span style=&#34;white-space: nowrap;&#34;&gt;&lt;svg width=&#34;.7em&#34; height=&#34;.7em&#34; viewBox=&#34;0 0 21 21&#34;
        xmlns=&#34;http://www.w3.org/2000/svg&#34;&gt;
        &lt;path d=&#34;m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z&#34; fill=&#34;currentColor&#34; /&gt;
        &lt;path d=&#34;M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z&#34;
            fill=&#34;currentColor&#34;&gt;
    &lt;/svg&gt;&lt;/span&gt;
手动添加证书
&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746085892100.png&#34;
	width=&#34;374&#34;
	height=&#34;57&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746085892100_hu_2f463072f0d44c59.png 480w, http://localhost:1313/p/2025050101/QQ_1746085892100_hu_ef8ae006fe3456cd.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;alt text&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;656&#34;
		data-flex-basis=&#34;1574px&#34;
	
&gt;
当你手动添加后，会获得一个ID&lt;/p&gt;
&lt;p&gt;然后去编辑流水线
&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746085940475.png&#34;
	width=&#34;2324&#34;
	height=&#34;709&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746085940475_hu_204e5b9439a3604f.png 480w, http://localhost:1313/p/2025050101/QQ_1746085940475_hu_4286c3adf0b0ef36.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;alt text&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;327&#34;
		data-flex-basis=&#34;786px&#34;
	
&gt;
添加任务
&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746085958485.png&#34;
	width=&#34;2327&#34;
	height=&#34;681&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746085958485_hu_eb44837ba00f8ffe.png 480w, http://localhost:1313/p/2025050101/QQ_1746085958485_hu_afea8a3c4084cbfe.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;alt text&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;341&#34;
		data-flex-basis=&#34;820px&#34;
	
&gt;
其他中选择js脚本
&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746085981406.png&#34;
	width=&#34;889&#34;
	height=&#34;1327&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746085981406_hu_7b63e27f177c3091.png 480w, http://localhost:1313/p/2025050101/QQ_1746085981406_hu_3de6cbccdd26f01e.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;alt text&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;66&#34;
		data-flex-basis=&#34;160px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;脚本内容如下&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#c678dd&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#e06c75&#34;&gt;certPem&lt;/span&gt; &lt;span style=&#34;color:#56b6c2&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e06c75&#34;&gt;ctx&lt;/span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;self&lt;/span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;cert&lt;/span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;crt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#c678dd&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#e06c75&#34;&gt;certKey&lt;/span&gt; &lt;span style=&#34;color:#56b6c2&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e06c75&#34;&gt;ctx&lt;/span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;self&lt;/span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;cert&lt;/span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;key&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;//&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;axios发起http请求上传证书&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#c678dd&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#e06c75&#34;&gt;res&lt;/span&gt; &lt;span style=&#34;color:#56b6c2&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e06c75&#34;&gt;await&lt;/span&gt; &lt;span style=&#34;color:#e06c75&#34;&gt;ctx&lt;/span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;http&lt;/span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;request&lt;/span&gt;({
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e06c75&#34;&gt;url&lt;/span&gt;: &lt;span style=&#34;color:#98c379&#34;&gt;&amp;#34;https://api.v2.rainyun.com/product/sslcenter/这里改为你的SSL证书ID&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e06c75&#34;&gt;headers&lt;/span&gt;: {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#98c379&#34;&gt;&amp;#39;x-api-key&amp;#39;&lt;/span&gt;: &lt;span style=&#34;color:#98c379&#34;&gt;&amp;#39;此处填写你的雨云API&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	},
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e06c75&#34;&gt;method&lt;/span&gt;: &lt;span style=&#34;color:#98c379&#34;&gt;&amp;#34;put&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e06c75&#34;&gt;data&lt;/span&gt;: {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e06c75&#34;&gt;cert&lt;/span&gt;: &lt;span style=&#34;color:#e06c75&#34;&gt;certPem&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;		&lt;span style=&#34;color:#e06c75&#34;&gt;key&lt;/span&gt;: &lt;span style=&#34;color:#e06c75&#34;&gt;certKey&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;})
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#c678dd&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#56b6c2&#34;&gt;!&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;res&lt;/span&gt; &lt;span style=&#34;color:#56b6c2&#34;&gt;||&lt;/span&gt; &lt;span style=&#34;color:#e06c75&#34;&gt;res&lt;/span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;code&lt;/span&gt; &lt;span style=&#34;color:#56b6c2&#34;&gt;!==&lt;/span&gt; &lt;span style=&#34;color:#d19a66&#34;&gt;200&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#56b6c2&#34;&gt;//&lt;/span&gt;抛异常才能让任务失败
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;	&lt;span style=&#34;color:#e06c75&#34;&gt;throw&lt;/span&gt; &lt;span style=&#34;color:#e06c75&#34;&gt;new&lt;/span&gt; &lt;span style=&#34;color:#e06c75&#34;&gt;Error&lt;/span&gt;(&lt;span style=&#34;color:#98c379&#34;&gt;&amp;#34;上传失败&amp;#34;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;//&lt;/span&gt;不能用&lt;span style=&#34;color:#e06c75&#34;&gt;console&lt;/span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;log&lt;/span&gt;，需要用&lt;span style=&#34;color:#e06c75&#34;&gt;ctx&lt;/span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;logger&lt;/span&gt; 才能把日志打印在&lt;span style=&#34;color:#e06c75&#34;&gt;ui上&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;ctx&lt;/span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;logger&lt;/span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;info&lt;/span&gt;(&lt;span style=&#34;color:#98c379&#34;&gt;&amp;#34;上传成功&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e06c75&#34;&gt;res&lt;/span&gt;&lt;span style=&#34;color:#56b6c2&#34;&gt;.&lt;/span&gt;&lt;span style=&#34;color:#e06c75&#34;&gt;data&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这个脚本是我用官网示例脚本改的，请按照内容填写两处
&lt;a class=&#34;link&#34; href=&#34;https://app.rainyun.com/account/settings/api-key&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34; &gt;雨云API获取&lt;/a&gt;

&lt;span style=&#34;white-space: nowrap;&#34;&gt;&lt;svg width=&#34;.7em&#34; height=&#34;.7em&#34; viewBox=&#34;0 0 21 21&#34;
        xmlns=&#34;http://www.w3.org/2000/svg&#34;&gt;
        &lt;path d=&#34;m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z&#34; fill=&#34;currentColor&#34; /&gt;
        &lt;path d=&#34;M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z&#34;
            fill=&#34;currentColor&#34;&gt;
    &lt;/svg&gt;&lt;/span&gt;
&lt;/p&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://app.rainyun.com/apps/ssl/list/free-ssl&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34; &gt;证书ID获取&lt;/a&gt;

&lt;span style=&#34;white-space: nowrap;&#34;&gt;&lt;svg width=&#34;.7em&#34; height=&#34;.7em&#34; viewBox=&#34;0 0 21 21&#34;
        xmlns=&#34;http://www.w3.org/2000/svg&#34;&gt;
        &lt;path d=&#34;m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z&#34; fill=&#34;currentColor&#34; /&gt;
        &lt;path d=&#34;M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z&#34;
            fill=&#34;currentColor&#34;&gt;
    &lt;/svg&gt;&lt;/span&gt;
&lt;/p&gt;
&lt;p&gt;其他内容无需改动。&lt;/p&gt;
&lt;p&gt;添加后再次申请即可自动上传至雨云。&lt;/p&gt;
&lt;h2 id=&#34;记得在配置文件添加ssl端口&#34;&gt;记得在配置文件添加SSL端口
&lt;/h2&gt;&lt;h2 id=&#34;listen-443-ssl-http2-&#34;&gt;listen 443 ssl http2 ;
&lt;/h2&gt;&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746086534331.png&#34;
	width=&#34;248&#34;
	height=&#34;61&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746086534331_hu_14d35b321a3b09fd.png 480w, http://localhost:1313/p/2025050101/QQ_1746086534331_hu_5c28d2ea4f52c183.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;alt text&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;406&#34;
		data-flex-basis=&#34;975px&#34;
	
&gt;&lt;/p&gt;
&lt;h3 id=&#34;宝塔面板&#34;&gt;宝塔面板
&lt;/h3&gt;&lt;p&gt;其实Certd有宝塔面板一键部署，不过为高级版功能
&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746093700100.png&#34;
	width=&#34;611&#34;
	height=&#34;123&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746093700100_hu_7be340370fe7f92b.png 480w, http://localhost:1313/p/2025050101/QQ_1746093700100_hu_6591fb8cab3129e6.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;alt text&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;496&#34;
		data-flex-basis=&#34;1192px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;如果你不想付费，则可以换种方法。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;此功能未经测试，仅为理论&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;如果你的web和certd在同一台服务器，则只需要复制到本机即可
&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746093903598.png&#34;
	width=&#34;759&#34;
	height=&#34;795&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746093903598_hu_34ef220a7d79d773.png 480w, http://localhost:1313/p/2025050101/QQ_1746093903598_hu_bc8ca975e7bbbd61.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;alt text&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;95&#34;
		data-flex-basis=&#34;229px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;如果在另一台服务器，则需要上传至服务器
&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746093943855.png&#34;
	width=&#34;755&#34;
	height=&#34;716&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746093943855_hu_eeb1239fcae690a8.png 480w, http://localhost:1313/p/2025050101/QQ_1746093943855_hu_a3caaeebf76766aa.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;alt text&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;105&#34;
		data-flex-basis=&#34;253px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;然后打开站点配置文件增加ssl证书目录&#34;&gt;然后打开站点配置文件，增加SSL证书目录
&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;ssl_certificate    证书目录;
ssl_certificate_key    密钥目录;
ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;
ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;
ssl_prefer_server_ciphers on;
ssl_session_cache shared:SSL:10m;
ssl_session_timeout 10m;
add_header Strict-Transport-Security &amp;quot;max-age=31536000&amp;quot;;
error_page 497  https://$host$request_uri;
&lt;/code&gt;&lt;/pre&gt;
&lt;hr&gt;
&lt;h3 id=&#34;cdn部署&#34;&gt;CDN部署
&lt;/h3&gt;&lt;p&gt;&lt;img src=&#34;http://localhost:1313/p/2025050101/QQ_1746094342236.png&#34;
	width=&#34;758&#34;
	height=&#34;799&#34;
	srcset=&#34;http://localhost:1313/p/2025050101/QQ_1746094342236_hu_8bc2ef0a0a92f8ad.png 480w, http://localhost:1313/p/2025050101/QQ_1746094342236_hu_8048f326bc591f13.png 1024w&#34;
	loading=&#34;lazy&#34;
	
		alt=&#34;大部分cdn部署都是免费的，直接使用即可。&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;94&#34;
		data-flex-basis=&#34;227px&#34;
	
&gt;&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
